/**
 * @file    SWITCH_LED_SDK.c
 * @brief   Application entry point.
 */
#include <stdio.h>
#include "board.h"
#include "peripherals.h"
#include "pin_mux.h"
#include "clock_config.h"
#include "MKL25Z4.h"
#include "fsl_debug_console.h"
#include "fsl_port.h"
#include "fsl_gpio.h"

int main(void) {
	// configura os clock
	CLOCK_EnableClock(kCLOCK_PortA);
	CLOCK_EnableClock(kCLOCK_PortC);
	CLOCK_EnableClock(kCLOCK_PortD);

	// setta porta como GPIO
	PORT_SetMultiplePinsConfig(PORTC, 9, kPORT_MuxAsGpio);
	PORT_SetMultiplePinsConfig(PORTA, 13, kPORT_MuxAsGpio);

	//setta porta A como gpio de entrada
	port_pin_config_t config = {0};
	config.mux = kPORT_MuxAsGpio;
	config.pullSelect = kPORT_PullDown;

	// configura como entrada
	PORT_SetPinConfig(PORTA, 12, &config);
	PORT_SetPinConfi(PORTD, 4, &config);

	gpio_pin_config_t led = {
		kGPIO_DigitalOutput,
		1
	};

	GPIO_PinInit(PORTC, 9, &led);

	// configura switch
	gpio_pin_config_t sw = {
		kGPIO_DigitalInput,
		1
	};

	GPIO_PinInit(PORTA, 12, &sw);

	while (1) {
		if (GPIO_ReadPinInput(PORTA, 12)) {
			GPIO_SetPinsOutput(PORTC, (1 << 9));
		} else {
			GPIO_ClearPinsOutput(PORTC, (1 << 9));
		}
	}

    return 0 ;
}
